---
title: "Test codes of matrices that generated by kadingir"
author: "OSHIKIRI Takamasa"
date: "`r Sys.time()`"
output: html_document
---

Test matrices of `EigenwordsCpp`, `EigendocsCpp`, `CLEigenwordsCpp`.
 
```{r}
source("./../src/kadingir.R", chdir = TRUE)

word_id <- sample(0:6, size = 100, replace = TRUE)
document_id <- rep(1:10, each = 10)
window.size <- 2
n.train.words <- length(word_id)
n.vocab <- length(unique(word_id))
dim.internal <- 20

m <- make.matrices(word_id, document_id, window.size)
res.eigenwords <- EigenwordsCpp(as.integer(word_id), window.size, n.vocab, dim.internal, mode_oscca = TRUE)
```

TODO: Fix res.eigenwords

# Test matrices
```{r, eval = FALSE}
res.eigenwords$tWW_h
diag(t(m$W) %*% m$W)**(-1/2)

res.eigenwords$tCC_h
diag(t(m$C) %*% m$C)**(-1/2)

res.eigenwords$tWC
t(m$W) %*% m$C

t(m$W) %*% m$W
t(m$C) %*% m$C

all(res.eigenwords$tWC == t(m$W) %*% m$C)
sum((res.eigenwords$tWW_h - diag(t(m$W) %*% m$W)**(-1/2))**2)
sum((res.eigenwords$tCC_h - diag(t(m$C) %*% m$C)**(-1/2))**2)
```
